<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Кошик — Sirevo</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family:'Montserrat',sans-serif;
      background:#f5f5f5;
      color:#111;
      padding:20px;
      transition: background 0.3s, color 0.3s;
    }

    body.dark { background:#111; color:#f5f5f5; }

    h1 {margin-bottom:20px; text-align:center;}
    .back-btn {
      display:inline-block;
      margin-bottom:20px;
      padding:8px 14px;
      background:#eee;
      color:#111;
      text-decoration:none;
      border-radius:6px;
      transition:background 0.3s;
    }
    .back-btn:hover {background:#ddd;}

    body.dark .back-btn { background:#333; color:#f5f5f5; }
    body.dark .back-btn:hover { background:#444; }

    .cart-container {
      max-width:800px;
      margin:auto;
      background:#fff;
      padding:20px;
      border-radius:10px;
      transition: background 0.3s;
    }
    body.dark .cart-container { background:#222; }

    .cart-item {
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:15px;
      border-bottom:1px solid #ddd;
      padding-bottom:10px;
    }
    body.dark .cart-item { border-color:#444; }

    .cart-item img {width:80px; border-radius:6px;}
    .cart-info {flex:1; margin-left:15px;}
    .cart-info h3 {margin-bottom:5px;}
    .cart-controls {display:flex; align-items:center; gap:5px;}
    .cart-controls button {
      padding:4px 8px;
      border:none;
      background:#eee;
      cursor:pointer;
      border-radius:4px;
    }
    body.dark .cart-controls button { background:#444; color:#fff; }

    .total {text-align:right; font-size:1.2em; margin-top:20px;}
    .empty {text-align:center; margin-top:50px; font-size:1.2em; color:#777;}
    body.dark .empty {color:#aaa;}
  </style>
</head>
<body>
  <a href="index.html" class="back-btn" id="backLink">← Повернутися в головне меню</a>
  <h1 id="pageTitle">Кошик</h1>
  <div class="cart-container" id="cartContainer"></div>
  <div class="total" id="cartTotal"></div>

  <script>
    // === ТЕМА из localStorage ===
    (function applyTheme() {
      const theme = localStorage.getItem("theme") || "light";
      if (theme === "dark") document.body.classList.add("dark");
    })();

    // === I18N (включая названия товаров) ===
    const I18N = {
      UA: {
        htmlLang: "uk",
        back: "← Повернутися в головне меню",
        title: "Кошик",
        empty: "Кошик порожній",
        price: "Ціна",
        remove: "Видалити",
        total: "Загальна сума",
        products: {
          1: "Куртка Prada",
          2: "Светр",
          3: "Джинси",
          4: "Look 1",
          5: "Look 2",
          6: "Look 3"
        }
      },
      EN: {
        htmlLang: "en",
        back: "← Back to main menu",
        title: "Cart",
        empty: "Your cart is empty",
        price: "Price",
        remove: "Remove",
        total: "Total",
        products: {
          1: "Jacket by Prada",
          2: "Sweater",
          3: "Jeans",
          4: "Look 1",
          5: "Look 2",
          6: "Look 3"
        }
      }
    };

    function getLangKey() {
      const raw = localStorage.getItem("lang") || "UA";
      if (raw.toLowerCase() === "uk") return "UA";
      if (raw.toLowerCase() === "en") return "EN";
      return (raw === "EN") ? "EN" : "UA";
    }

    function applyStaticTexts() {
      const langKey = getLangKey();
      const t = I18N[langKey];
      document.documentElement.setAttribute("lang", t.htmlLang);
      document.getElementById("backLink").textContent = t.back;
      document.getElementById("pageTitle").textContent = t.title;
    }

    function renderCart() {
      const langKey = getLangKey();
      const t = I18N[langKey];

      const container = document.getElementById("cartContainer");
      const totalEl = document.getElementById("cartTotal");
      const cart = JSON.parse(localStorage.getItem("cart")) || [];

      if (cart.length === 0) {
        container.innerHTML = `<p class="empty">${t.empty}</p>`;
        totalEl.textContent = "";
        return;
      }

      container.innerHTML = "";
      let total = 0;

      cart.forEach(item => {
        total += item.price * item.quantity;

        const itemName = t.products[item.id] || item.name;

        const itemDiv = document.createElement("div");
        itemDiv.className = "cart-item";
        itemDiv.innerHTML = `
          <img src="product${item.id}.jpg" alt="${itemName}">
          <div class="cart-info">
            <h3>${itemName}</h3>
            <p>${t.price}: ${item.price} ₴</p>
            <div class="cart-controls">
              <button class="decrease">-</button>
              <span>${item.quantity}</span>
              <button class="increase">+</button>
              <button class="remove">${t.remove}</button>
            </div>
          </div>
        `;

        const decreaseBtn = itemDiv.querySelector(".decrease");
        const increaseBtn = itemDiv.querySelector(".increase");
        const removeBtn   = itemDiv.querySelector(".remove");

        decreaseBtn.addEventListener("click", () => {
          if (item.quantity > 1) item.quantity--;
          else cart.splice(cart.indexOf(item), 1);
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCart();
        });

        increaseBtn.addEventListener("click", () => {
          item.quantity++;
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCart();
        });

        removeBtn.addEventListener("click", () => {
          cart.splice(cart.indexOf(item), 1);
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCart();
        });

        container.appendChild(itemDiv);
      });

      totalEl.textContent = `${t.total}: ${total} ₴`;
    }

    applyStaticTexts();
    renderCart();

    window.addEventListener("storage", (e) => {
      if (e.key === "lang") {
        applyStaticTexts();
        renderCart();
      }
    });
  </script>
</body>
</html>
